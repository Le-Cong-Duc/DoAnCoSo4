<!doctype html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Admin Dashboard - Quáº£n lÃ½</title>
    <link rel="stylesheet" href="adminIndex.css" />
</head>

<body>
    <div class="app">
        <aside class="sidebar" id="sidebar">
            <div class="brand">
                <div class="logo">BK</div>
                <div>
                    <div class="title">BookTicket</div>
                    <div class="subtitle">Admin Panel</div>
                </div>
            </div>

            <div class="admin-card">
                <img class="avatar" src="https://ui-avatars.com/api/?name=Admin&background=0D8ABC&color=fff&size=128"
                    alt="avatar" />
                <div class="admin-info">
                    <div class="name">Admin</div>
                    <div class="email">admin@example.com</div>
                </div>
            </div>

            <nav class="menu" id="menu">
                <button data-file="admin/dashboard.html" class="active" title="Tá»•ng quan">
                    <span class="icon">ğŸ </span> Tá»•ng quan
                </button>

                <button data-file="admin/users.html" title="Quáº£n lÃ½ ngÆ°á»i dÃ¹ng">
                    <span class="icon">ğŸ‘¥</span> Quáº£n lÃ½ ngÆ°á»i dÃ¹ng
                </button>

                <button data-file="admin/movies.html" title="Quáº£n lÃ½ phim">
                    <span class="icon">ğŸ¬</span> Quáº£n lÃ½ phim
                </button>

                <button data-file="admin/theaters.html" title="Quáº£n lÃ½ ráº¡p chiáº¿u">
                    <span class="icon">ğŸ“</span> Quáº£n lÃ½ ráº¡p chiáº¿u
                </button>

                <button data-file="admin/orders.html" title="Quáº£n lÃ½ hÃ³a Ä‘Æ¡n">
                    <span class="icon">ğŸ§¾</span> Quáº£n lÃ½ hÃ³a Ä‘Æ¡n
                </button>

                <button data-file="admin/revenue.html" title="Quáº£n lÃ½ doanh thu">
                    <span class="icon">ğŸ’°</span> Quáº£n lÃ½ doanh thu
                </button>

                <button data-file="admin/settings.html" title="CÃ i Ä‘áº·t">
                    <span class="icon">âš™ï¸</span> CÃ i Ä‘áº·t
                </button>
            </nav>

            <div class="sidebar-footer">
                <button class="btn-logout" id="toggleSidebar" title="Thu/ Má»Ÿ">ğŸ”€ Thu/Má»Ÿ</button>
                <button class="btn-logout" id="logoutBtn">â‹ ÄÄƒng xuáº¥t</button>
            </div>
        </aside>

        <main class="content" id="mainContent" aria-live="polite">
            <!-- Ná»™i dung Ä‘á»™ng sáº½ load vÃ o Ä‘Ã¢y -->
            <div class="loading">Äang táº£i...</div>
        </main>
    </div>

    <script>
        // load file into mainContent
        const menu = document.getElementById('menu');
        const main = document.getElementById('mainContent');

        async function loadView(file) {
            try {
                main.innerHTML = '<div class="loading">Äang táº£i...</div>';
                const res = await fetch(file, { cache: "no-store" });
                if (!res.ok) throw new Error('KhÃ´ng thá»ƒ load: ' + res.status);
                const html = await res.text();
                main.innerHTML = html;
                // run onload initializer if view defines it
                if (typeof window.onViewLoaded === 'function') {
                    try { window.onViewLoaded(file); } catch (e) { console.warn(e); }
                }
            } catch (err) {
                main.innerHTML = '<div class="panel"><h3>Lá»—i khi táº£i ná»™i dung</h3><p>' + err.message + '</p></div>';
                console.error(err);
            }
        }

        // Initialize: load dashboard
        loadView('dashboard.html');

        menu.addEventListener('click', (e) => {
            const btn = e.target.closest('button[data-file]');
            if (!btn) return;
            // active state
            Array.from(menu.querySelectorAll('button')).forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            const file = btn.getAttribute('data-file');
            if (file) loadView(file);
        });

        // logout demo
        document.getElementById('logoutBtn').addEventListener('click', () => {
            if (confirm('Báº¡n cÃ³ muá»‘n Ä‘Äƒng xuáº¥t?')) window.location.href = '/logout';
        });
    </script>
</body>

</html>